# Инструкция по упаковке расширения для распространения

## Подготовка production версии

### 1. Убедитесь, что все настройки production режима установлены

Проверьте следующие файлы:

- `js/background.js`: `const IS_DEV_MODE = false;`
- `js/saved-data.js`: `const IS_DEV_MODE = false;`
- `src/config.ts`: 
  - `export const IS_DEV_MODE = false;`
  - `export const ALLOW_DELETE_DATA = false;`

### 2. Соберите production версию

Запустите скрипт сборки:

```bash
node build-production.js
```

Или используйте npm:

```bash
npm run build:prod
node build-production.js
```

Скрипт создаст папку `dist/` с готовым расширением.

### 3. Проверьте содержимое папки dist/

Убедитесь, что в папке `dist/` есть:

- `manifest.json`
- `js/` (все JS файлы)
- `css/` (все CSS файлы)
- `html/` (все HTML файлы)
- `icons/` (все иконки)
- `_locales/` (локализация)
- `README.txt` (инструкция для пользователей)

### 4. Упакуйте расширение

#### Вариант 1: ZIP архив (рекомендуется)

1. Заархивируйте папку `dist/` в ZIP файл
2. Назовите файл, например: `LMS-MAI-Quiz-Solver-v2.0.0.zip`
3. Распространите ZIP файл

#### Вариант 2: Прямая папка

1. Переименуйте папку `dist/` в `LMS-MAI-Quiz-Solver-v2.0.0`
2. Заархивируйте или распространите папку напрямую

## Распространение

### Для пользователей

Пользователи должны:

1. **Скачать и распаковать** ZIP файл в любое удобное место
2. **Открыть браузер** Chrome или Edge
3. **Перейти в настройки расширений**:
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`
4. **Включить "Режим разработчика"** (Developer mode) в правом верхнем углу
5. **Нажать "Загрузить распакованное расширение"** (Load unpacked)
6. **Выбрать папку** с распакованным расширением

### Важно для пользователей

- **Не удаляйте папку** с расширением после установки
- **Не переименовывайте файлы** внутри папки расширения
- Расширение будет работать только пока папка существует на компьютере

## Проверка production версии

После сборки проверьте:

1. ✅ Кнопка "Очистить все данные" **не отображается** в интерфейсе
2. ✅ Кнопка "Удалить" для отдельных записей **не отображается**
3. ✅ `IS_DEV_MODE` везде установлен в `false`
4. ✅ Расширение работает корректно на сайте LMS MAI

## Автоматическая проверка

Скрипт `build-production.js` автоматически проверяет:

- ✅ Все `IS_DEV_MODE` установлены в `false`
- ✅ Все `ALLOW_DELETE_DATA` установлены в `false`
- ✅ Все необходимые файлы скопированы
- ✅ React компоненты собраны

Если проверка не пройдена, скрипт остановится с ошибкой.

## Структура production версии

```
dist/
├── manifest.json          # Манифест расширения
├── js/                    # JavaScript файлы
│   ├── background.js
│   ├── content.js
│   ├── api.js
│   ├── saved-data.js
│   └── ...
├── css/                   # CSS файлы
│   └── content.css
├── html/                  # HTML страницы
│   ├── popup.html
│   ├── saved-data-react.html
│   ├── auto-scan-react.html
│   ├── js/               # Собранные React компоненты
│   └── css/              # Собранные стили
├── icons/                # Иконки расширения
│   ├── logo@16.png
│   ├── logo@32.png
│   └── ...
├── _locales/             # Локализация
│   ├── ru/
│   └── en/
└── README.txt            # Инструкция для пользователей
```

## Обновление версии

При обновлении версии:

1. Обновите `version` в `manifest.json`
2. Обновите `version` в `package.json`
3. Пересоберите production версию
4. Создайте новый ZIP файл с новой версией в названии

## Безопасность

Production версия:

- ✅ **Не позволяет** пользователям удалять отдельные записи
- ✅ **Не позволяет** пользователям очищать всю базу данных
- ✅ **Не позволяет** переключаться в dev mode
- ✅ **Защищает** данные от случайного удаления

Все функции удаления данных отключены для защиты пользовательских данных.

