# Исправление ошибки HTTP 503

## Диагностика

Ошибка 503 означает, что сервер доступен, но не может обработать запрос.

### Проверка на сервере:

```bash
# 1. Проверьте статус сервиса
sudo systemctl status lms-api

# 2. Проверьте логи
sudo journalctl -u lms-api -n 50 --no-pager

# 3. Проверьте, слушает ли сервер
sudo ss -tlnp | grep 3000

# 4. Проверьте локально
curl http://localhost:3000/api/health

# 5. Проверьте, нет ли ошибок в приложении
sudo journalctl -u lms-api -f
```

## Возможные причины и решения:

### 1. Сервис не запущен
```bash
sudo systemctl start lms-api
sudo systemctl status lms-api
```

### 2. Ошибка в приложении
Проверьте логи на наличие ошибок:
```bash
sudo journalctl -u lms-api -n 100 --no-pager
```

### 3. Проблема с базой данных
```bash
cd ~/lms-server/server
ls -la quiz_data.db
# Если файл заблокирован, удалите lock файл:
rm quiz_data.db-journal
sudo systemctl restart lms-api
```

### 4. Проблема с правами доступа
```bash
cd ~/lms-server/server
ls -la
# Убедитесь, что файлы доступны пользователю ubuntu
sudo chown -R ubuntu:ubuntu ~/lms-server
```

### 5. Перезапуск сервиса
```bash
sudo systemctl restart lms-api
sleep 2
sudo systemctl status lms-api
curl http://localhost:3000/api/health
```

### 6. Проверка конфигурации service файла
```bash
cat /etc/systemd/system/lms-api.service
# Убедитесь, что пути правильные
```

## Если ничего не помогает:

1. Остановите сервис
2. Запустите вручную для просмотра ошибок:
```bash
cd ~/lms-server/server
node server.js
```

Это покажет ошибки в реальном времени.

