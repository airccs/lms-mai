# Решение проблемы: Port is Closed

## Проблема:
- ❌ `http://95.24.148.25:3000/api/health` не работает
- ❌ Port 3000 is closed

## Возможные причины:

### 1. Правило в роутере настроено неправильно

**Проверьте:**
- Поле "Вход" должно быть **пустым** или `0.0.0.0`, НЕ локальный IP
- Правило должно быть **включено**
- Внутренний IP должен совпадать с IP вашего ПК

**Исправление:**
1. Отредактируйте правило
2. В поле "Вход": оставьте пустым или `0.0.0.0`
3. Сохраните и перезагрузите роутер

### 2. CGNAT (Carrier-Grade NAT)

**Что это:**
Провайдер использует общий IP для нескольких клиентов, проброс портов не работает.

**Как проверить:**
1. Зайдите в настройки роутера
2. Найдите "WAN IP" или "Внешний IP"
3. Сравните с IP на whatismyipaddress.com

**Если IP разные** → у вас CGNAT

**Решение:**
- Попросить у провайдера публичный IP (обычно платно, ~100-500₽/месяц)
- Использовать облачный хостинг (Railway, Render)

### 3. Провайдер блокирует порты

Некоторые провайдеры блокируют входящие соединения на определенные порты.

**Решение:**
- Попробуйте другой порт (например, 8080, 8443)
- Используйте облачный хостинг

### 4. Роутер не поддерживает проброс портов

Старые роутеры могут не поддерживать проброс портов.

**Решение:**
- Обновить прошивку роутера
- Использовать облачный хостинг

## Быстрые решения:

### Решение 1: Использовать ngrok (для тестирования)

1. Скачайте ngrok: https://ngrok.com/download
2. Запустите:
   ```bash
   ngrok http 3000
   ```
3. Получите публичный URL (например: `https://abc123.ngrok.io`)
4. Используйте этот URL в расширении

**Плюсы:** Работает сразу, не требует настройки роутера  
**Минусы:** URL меняется при каждом запуске (в бесплатной версии)

### Решение 2: Облачный хостинг (рекомендуется)

#### Railway (бесплатный тариф):

1. Зарегистрируйтесь: https://railway.app/
2. Создайте новый проект
3. Подключите GitHub репозиторий (или загрузите код)
4. Railway автоматически развернет сервер
5. Получите публичный URL (например: `https://your-app.railway.app`)

#### Render (бесплатный тариф):

1. Зарегистрируйтесь: https://render.com/
2. Создайте Web Service
3. Подключите репозиторий
4. Получите публичный URL

#### Fly.io (бесплатный тариф):

1. Зарегистрируйтесь: https://fly.io/
2. Установите flyctl
3. Разверните приложение

### Решение 3: Попросить у провайдера публичный IP

Если у вас CGNAT:
1. Позвоните в техподдержку провайдера
2. Попросите подключить публичный IP
3. Обычно это платная услуга (~100-500₽/месяц)

## Рекомендация:

Для продакшена лучше использовать **облачный хостинг**:
- ✅ Надежность (99.9% uptime)
- ✅ Автоматическое развертывание
- ✅ HTTPS из коробки
- ✅ Не зависит от вашего интернета
- ✅ Бесплатные тарифы доступны

Для тестирования можно использовать **ngrok**.

## Что делать сейчас:

1. **Проверьте настройки роутера** - исправьте поле "Вход"
2. **Попробуйте ngrok** для быстрого тестирования
3. **Разверните на Railway/Render** для постоянной работы

