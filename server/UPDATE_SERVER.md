# Обновление сервера на Oracle Cloud

## Быстрое обновление

Выполните на сервере:

```bash
# Перейдите в директорию проекта
cd ~/lms-server

# Получите последние изменения из GitHub
git pull

# Перезапустите сервис
sudo systemctl restart lms-api

# Проверьте статус
sudo systemctl status lms-api

# Проверьте логи
sudo journalctl -u lms-api -n 50 --no-pager
```

## Проверка обновления

После перезапуска проверьте, что endpoint `/api/stats` работает:

```bash
# Локально на сервере
curl http://localhost:3000/api/stats

# Должен вернуться JSON с объектом statistics (может быть пустым, если данных нет)
```

## Что было обновлено:

1. ✅ Endpoint `/api/stats` теперь возвращает реальную статистику из базы данных
2. ✅ Добавлено подробное логирование для диагностики
3. ✅ Улучшена обработка ошибок

## Если что-то пошло не так:

```bash
# Проверьте статус сервиса
sudo systemctl status lms-api

# Посмотрите логи ошибок
sudo journalctl -u lms-api -n 100 --no-pager | grep -i error

# Если сервис не запускается, проверьте синтаксис
cd ~/lms-server/server
node -c server.js
```

## Автоматическое обновление (опционально)

Если хотите настроить автоматическое обновление при каждом `git push`, можно использовать GitHub Actions или простой скрипт с cron.

